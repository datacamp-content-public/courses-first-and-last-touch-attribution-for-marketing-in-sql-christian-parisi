---
title: Insert title here
key: e45961e54645c8642fb657be6e20b957

---
## First Touch Attribution in SQL

```yaml
type: "TitleSlide"
key: "fc1a94a7ff"
```

`@lower_third`

name: Christian D. Parisi
title: Head of Data and Analytics, Quidd


`@script`



---
## Lookback Windows

```yaml
type: "FullSlide"
key: "f639924f5d"
```

`@part1`
- Allow us to consider how far back to consider a visit {{1}}

- Differents types of businesses have different considerations for lookback periods  {{2}}


- INTERVAL SQL function allows us to specify how far prior to the first purchase we want to look back.  {{3}}

![](https://assets.datacamp.com/production/repositories/4453/datasets/97a4567b20f4af8515d9c6fc3912f47c20b905ff/interval%20sql.png){{4}}


`@script`
Our first consideration is a lookback window.  These allow us to specify how far back in time we want to look at visits when considering if it was the first touch.  For example, it makes a lot more sense to look at a web visit six months ago for a user that bought a car online but makes less sense for a digital food ordering platform attributing a purchase from last evening.  Point is that different lines of businesses will have different rules for considering lookback periods and this framework can be applied to all.

When we write the SQL query we have the ability to do a calculation with the date using INTERVALS.  In this case, we want to only look at visits that took place within the 30 days prior to the first purchase date.  This is done by subtracting â€“ INTERVAL 30 days from the first purchase date in a where clause to only consider visits in that time frame.


---
## Finding the first visit...

```yaml
type: "FullSlide"
key: "2e2f428c37"
```

`@part1`
- Leverages same aggregate framework as last touch attribution {{1}}

- New function: MIN() {{2}}

- Example code to find first visit source {{3}}

- `select user_id, source, first_purchase_date, MIN(visit_date) as first_visit_date 
from 
visits_purchases 
where visit_date > first_purchase_date - - INTERVAL '30 DAY'
group by user_id, source, first_purchase_date` {{3}}


`@script`



---
## Something looks wrong

```yaml
type: "FullSlide"
key: "c9d0a4fd1f"
```

`@part1`



`@script`



---
## Final Slide

```yaml
type: "FinalSlide"
key: "8439793603"
```

`@script`


